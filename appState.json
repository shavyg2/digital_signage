{"EDITOR_STATE":{"allProjectFiles":{"c04ee7eb-3c42-412d-9578-3e6305a87836":{"id":"c04ee7eb-3c42-412d-9578-3e6305a87836","parent":null,"name":"digital_signage","type":"DIRECTORY","isDirectory":true,"children":["adb13d66-669f-4ca1-86e4-f01f8944d783","16928a15-91a0-4bd3-a0f1-f614363961f5","a9e7fdce-924d-4a26-8b35-542257b7e215"],"isRemovable":false,"filePath":"digital_signage"},"adb13d66-669f-4ca1-86e4-f01f8944d783":{"id":"adb13d66-669f-4ca1-86e4-f01f8944d783","parent":"c04ee7eb-3c42-412d-9578-3e6305a87836","name":"lambda.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"digital_signage/lambda.js","code":"\n\nexports.handler = function (event, context, callback) {\n\n    let {username,password} = event;\n    console.log(event)\n\n    callback(null, 'Successfully executed');\n}","triggers":[{"resourceName":"apigusEast1digitalsignageSignupusersignupput","config":{}},{"resourceName":"apigusEast1digitalsignageSignupusersignupput","config":{}}],"config":{"memory":128,"timeout":60,"runtime":"nodejs8.10"},"testCases":{"df8bc099-a1b1-4b27-8ea2-4355c5bcab28":{"id":"df8bc099-a1b1-4b27-8ea2-4355c5bcab28","name":"Test User Deployment","functionId":"adb13d66-669f-4ca1-86e4-f01f8944d783","event":"{\n    \"username\": \"shavyg2@gmail.com\",\n    \"password\": \"Password123\"\n}"},"1412c3ac-3781-4f0c-a0d3-7b80d338791e":{"id":"1412c3ac-3781-4f0c-a0d3-7b80d338791e","name":"UserSignup","functionId":"adb13d66-669f-4ca1-86e4-f01f8944d783","event":"{\n    \"key1\": \"value1\",\n    \"key2\": \"value2\",\n    \"key3\": \"value3\"\n}"}}},"16928a15-91a0-4bd3-a0f1-f614363961f5":{"id":"16928a15-91a0-4bd3-a0f1-f614363961f5","parent":"c04ee7eb-3c42-412d-9578-3e6305a87836","name":"lib","type":"DIRECTORY","isDirectory":true,"children":[],"isRemovable":true,"filePath":"digital_signage/lib"},"a9e7fdce-924d-4a26-8b35-542257b7e215":{"id":"a9e7fdce-924d-4a26-8b35-542257b7e215","parent":"c04ee7eb-3c42-412d-9578-3e6305a87836","name":"user","type":"DIRECTORY","isDirectory":true,"children":["59fc5333-532e-4ebe-aa37-1388d388ed4f","6d2bcb86-899c-4f59-b126-32e4830d1677"],"isRemovable":true,"filePath":"digital_signage/user"},"59fc5333-532e-4ebe-aa37-1388d388ed4f":{"id":"59fc5333-532e-4ebe-aa37-1388d388ed4f","parent":"a9e7fdce-924d-4a26-8b35-542257b7e215","name":"signup.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"digital_signage/user/signup.js","code":"let AWS = require('aws-sdk');\nconst cognito_idp = new AWS.CognitoIdentityServiceProvider();\n\nexports.handler = async function (event, context, callback) {\n\n    let { username, password,email } = event;\n\n    cognito_idp.adminCreateUser({\n        UserPoolId: process.env.user_pool_id,\n        Username: `${username}`,\n        DesiredDeliveryMediums: [\"EMAIL\"],\n        ForceAliasCreation: false,\n        TemporaryPassword: `${password}`,\n        UserAttributes: [{ Name: \"email\", Value: `${email}` }],\n        ValidationData: []\n    }, function (error, data) {\n        if (error) {\n            // implement error handling logic here\n            return callback(error)\n        }\n\n        return callback(null,\"success\")\n        // your logic goes within this block\n    });\n\n\n}","triggers":[{"resourceName":"apigusEast1usersignupuserput","config":{}}],"config":{"memory":128,"timeout":60,"runtime":"nodejs8.10"},"testCases":{"965eb90e-6d93-40e6-ae32-ea280d174740":{"id":"965eb90e-6d93-40e6-ae32-ea280d174740","name":"UserSignup","functionId":"59fc5333-532e-4ebe-aa37-1388d388ed4f","event":"{\n    \"email\":\"shavyg2@gmail.com\",\n    \"username\":\"shavy\",\n    \"password\":\"password\"\n}"}}},"6d2bcb86-899c-4f59-b126-32e4830d1677":{"id":"6d2bcb86-899c-4f59-b126-32e4830d1677","parent":"a9e7fdce-924d-4a26-8b35-542257b7e215","name":"signin.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"digital_signage/user/signin.js","code":"let AWS = require('aws-sdk');\nconst AmazonCognitoIdentity= require(\"amazon-cognito-identity-js\");\nconst cognito_idp = new AWS.CognitoIdentityServiceProvider();\n\nexports.handler = function (event, context, callback) {\n    //const AmazonCognitoIdentity = cognito_idp //new AWS.CognitoIdentity(cognito_idp);\n   \n\n    let { username, password } = event;\n\n    var authenticationData = {\n        Username: username,\n        Password: password,\n    };\n\n    var authenticationDetails = new AmazonCognitoIdentity.AuthenticationDetails(authenticationData);\n    var poolData = {\n        UserPoolId: process.env.user_pool_id,\n        ClientId: process.env.app_id\n    };\n    var userPool = new AmazonCognitoIdentity.CognitoUserPool(poolData);\n    var userData = {\n        Username: username,\n        Pool: userPool\n    };\n    var cognitoUser = new AmazonCognitoIdentity.CognitoUser(userData);\n    cognitoUser.authenticateUser(authenticationDetails, {\n        onSuccess: function (result) {\n            console.log(result)\n            var accessToken = result.getAccessToken().getJwtToken();\n\n            /* Use the idToken for Logins Map when Federating User Pools with identity pools or when passing through an Authorization Header to an API Gateway Authorizer */\n            //var idToken = result.idToken.jwtToken;\n            callback(null, accessToken)\n        },\n\n        onFailure: function (err) {\n            console.error(err)\n            callback(err.message)\n        },\n\n    });\n\n}","triggers":[{"resourceName":"apigusEast1signinuserpost","config":{}}],"config":{"memory":128,"timeout":60,"runtime":"nodejs8.10"},"testCases":{"e8befe99-fdfc-4267-b392-8510e6dba40d":{"id":"e8befe99-fdfc-4267-b392-8510e6dba40d","name":"Signin","functionId":"6d2bcb86-899c-4f59-b126-32e4830d1677","event":"{\n    \"username\":\"shavy\",\n    \"password\":\"password\"\n}"}}}},"deletedFiles":[],"rootNode":"c04ee7eb-3c42-412d-9578-3e6305a87836","openFiles":["adb13d66-669f-4ca1-86e4-f01f8944d783","59fc5333-532e-4ebe-aa37-1388d388ed4f","6d2bcb86-899c-4f59-b126-32e4830d1677"],"currentFileId":"6d2bcb86-899c-4f59-b126-32e4830d1677","resources":{"apigusEast1digitalsignageSignupusersignupput":{"name":"apigusEast1digitalsignageSignupusersignupput","type":"API_GATEWAY","config":{"selectedRegion":"us-east-1","apiMode":0,"apiName":"digital_signage-signup","endpointType":"EDGE","resourceMode":0,"resourceName":"user/signup","resourcePath":"/user/signup","restMethod":"PUT","proxyIntegration":false,"enableCORS":true,"stageMode":0,"stageName":"dev"},"globallyEditable":true},"cognitodigitalwindow":{"name":"cognitodigitalwindow","type":"CognitoIdentityServiceProvider","config":{"mode":1,"name":"digital window","arn":"arn:aws:cognito-idp:us-east-1:083123597636:userpool/us-east-1_bN8VlMx6S","userPool":{"Id":"us-east-1_bN8VlMx6S","Name":"digital window","LambdaConfig":{},"Policies":{"PasswordPolicy":{"MinimumLength":8,"RequireUppercase":false,"RequireLowercase":false,"RequireNumbers":false,"RequireSymbols":false}},"AutoVerifiedAttributes":["email"],"AliasAttributes":["email"],"SmsVerificationMessage":"Your verification code is {####}. ","EmailVerificationMessage":"Your verification code is {####}. ","EmailVerificationSubject":"Your verification code","VerificationMessageTemplate":{"SmsMessage":"Your verification code is {####}. ","EmailMessage":"Your verification code is {####}. ","EmailSubject":"Your verification code","EmailMessageByLink":"Please click the link below to verify your email address. {##Verify Email##} ","EmailSubjectByLink":"Verify Digital Window Account","DefaultEmailOption":"CONFIRM_WITH_LINK"},"SmsAuthenticationMessage":"Your authentication code is {####}. ","MfaConfiguration":"OFF","DeviceConfiguration":{"ChallengeRequiredOnNewDevice":false,"DeviceOnlyRememberedOnUserPrompt":true},"EmailConfiguration":{},"UserPoolTags":{},"AdminCreateUserConfig":{"AllowAdminCreateUserOnly":false,"UnusedAccountValidityDays":30,"InviteMessageTemplate":{"SMSMessage":"Your username is {username} and temporary password is {####}. ","EmailMessage":"Your username is {username} and temporary password is {####}. ","EmailSubject":"Your temporary password"}},"SchemaAttributes":[{"Name":"sub","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":false,"Required":true,"StringAttributeConstraints":{"MinLength":"1","MaxLength":"2048"}},{"Name":"name","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"given_name","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"family_name","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"middle_name","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"nickname","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"preferred_username","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"profile","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"picture","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"website","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"email","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":true,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"email_verified","AttributeDataType":"Boolean","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false},{"Name":"gender","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"birthdate","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"10","MaxLength":"10"}},{"Name":"zoneinfo","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"locale","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"phone_number","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"phone_number_verified","AttributeDataType":"Boolean","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false},{"Name":"address","AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"StringAttributeConstraints":{"MinLength":"0","MaxLength":"2048"}},{"Name":"updated_at","AttributeDataType":"Number","DeveloperOnlyAttribute":false,"Mutable":true,"Required":false,"NumberAttributeConstraints":{"MinValue":"0"}}]}},"globallyEditable":false},"apigusEast1usersignupuserput":{"name":"apigusEast1usersignupuserput","type":"API_GATEWAY","config":{"selectedRegion":"us-east-1","apiMode":0,"apiName":"user/signup","endpointType":"EDGE","resourceMode":0,"resourceName":"user","resourcePath":"/user","restMethod":"PUT","proxyIntegration":false,"enableCORS":true,"stageMode":0,"stageName":"dev"},"globallyEditable":true},"apigusEast1signinuserpost":{"name":"apigusEast1signinuserpost","type":"API_GATEWAY","config":{"selectedRegion":"us-east-1","apiMode":0,"apiName":"signin","endpointType":"EDGE","resourceMode":0,"resourceName":"user","resourcePath":"/user","restMethod":"POST","proxyIntegration":false,"enableCORS":false,"stageMode":0,"stageName":"dev"},"globallyEditable":true}},"envVariables":[{"lambdaId":"all","varKey":"SIGMA_AWS_ACC_ID","varValue":null,"shouldPersist":false,"displayOnly":false,"editable":false},{"lambdaId":"all","varKey":"user_pool_id","varValue":"us-east-1_bN8VlMx6S","shouldPersist":true,"displayOnly":false,"editable":true},{"lambdaId":"all","varKey":"app_id","varValue":"h9jbj64vo7us1o4s1ahp594lp","shouldPersist":true,"displayOnly":false,"editable":true}],"packageJSON":{"dependencies":{"aws-sdk":{"name":"aws-sdk","version":"2.176.0","notRemovable":true},"amazon-cognito-identity-js":{"name":"amazon-cognito-identity-js","version":"2.0.29"},"amazon-cognito-identity-js-node":{"name":"amazon-cognito-identity-js-node","version":"0.0.3"}}},"lambdaId":"adb13d66-669f-4ca1-86e4-f01f8944d783"},"PROJECT_META":{"projectName":"digital_signage","projectDescription":"A digital View","projectVersion":"1.0.0","projectRegion":"us-east-1","lastSave":1537635686490},"VCS_STATE":{"provider":"GitHub","repo":{"name":"digital_signage","url":"https://github.com/shavyg2/digital_signage"}}}